
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>RockData</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-light">
  <div class="container mt-5">
    <div class="text-center mb-4">
      <img src="{{ url_for('static', filename='logo_rockdata.png') }}" alt="RockData Logo" width="150">
      <h1 class="display-5 fw-bold text-dark">ROCKDATA</h1>
      <p class="text-muted fst-italic">No adivinamos. Calculamos.</p>
    </div>

    <!-- Resultados de predicción principal -->
    {% if resultado %}
    <div class="card shadow p-4">
      <h4 class="mb-3 text-primary">📊 Resultados de Predicción</h4>
      <ul class="list-group">
        <li class="list-group-item">⚽ Goles en Primer Tiempo: <strong>{{ resultado['Goles 1T'] }}</strong></li>
        <li class="list-group-item">⚽ Goles en Segundo Tiempo: <strong>{{ resultado['Goles 2T'] }}</strong></li>
        <li class="list-group-item">🎯 Total Goles Esperados: <strong>{{ resultado['Goles Totales'] }}</strong></li>
        <li class="list-group-item">🟨 Tarjetas Amarillas: <strong>{{ resultado['Tarjetas Promedio'] }}</strong></li>
        <li class="list-group-item">🟥 Tarjetas Rojas: <strong>{{ resultado['Rojas'] }}</strong></li>
        <li class="list-group-item">🏳️ Córners Totales: <strong>{{ resultado['Corners'] }}</strong></li>
        <li class="list-group-item">🏠 Fortaleza Local (últimos 10): <strong>{{ resultado['Fortaleza Local'] }}%</strong></li>
        <li class="list-group-item">🛫 Fortaleza Visita (últimos 10): <strong>{{ resultado['Fortaleza Visita'] }}%</strong></li>
        <li class="list-group-item bg-success-subtle">🧠 <strong>Pronóstico Final: {{ resultado['Pronóstico'] }}</strong></li>
      </ul>
    </div>
    {% endif %}

    <!-- Botón único para forma reciente -->
    <div class="text-end mt-3">
      <button class="btn btn-outline-primary btn-sm" onclick="mostrarSimulacion()">📊 Ver forma reciente</button>
    </div>

    <!-- Contenedor que se llena dinámicamente -->
    <div id="simulacion-container" class="mt-4" style="display: none;">
      <h5>📊 Simulación por Forma Reciente</h5>
      <div id="simulacion-datos" class="border rounded p-3 bg-light">
        <p>Cargando datos...</p>
      </div>
    </div>
  </div>

  <script>
    function mostrarSimulacion() {
      fetch('/static/simulacion_forma_reciente.json')
        .then(response => response.json())
        .then(data => {
          const statsLocal = data.forma_reciente.local;
          const statsVisita = data.forma_reciente.visita;
          const contenedor = document.getElementById("simulacion-datos");

          contenedor.innerHTML = `
            <h6><strong>LOCAL – Últimos 5 partidos</strong></h6>
            <ul>
              <li>Goles: ${statsLocal.goles}</li>
              <li>Goles 1T: ${statsLocal.goles_1t}</li>
              <li>Goles 2T: ${statsLocal.goles_2t}</li>
              <li>Córners: ${statsLocal.corners}</li>
              <li>Amarillas: ${statsLocal.amarillas}</li>
              <li>Rojas: ${statsLocal.rojas}</li>
            </ul>
            <h6><strong>VISITA – Últimos 5 partidos</strong></h6>
            <ul>
              <li>Goles: ${statsVisita.goles}</li>
              <li>Goles 1T: ${statsVisita.goles_1t}</li>
              <li>Goles 2T: ${statsVisita.goles_2t}</li>
              <li>Córners: ${statsVisita.corners}</li>
              <li>Amarillas: ${statsVisita.amarillas}</li>
              <li>Rojas: ${statsVisita.rojas}</li>
            </ul>
          `;

          document.getElementById("simulacion-container").style.display = "block";
        })
        .catch(error => {
          console.error("Error al cargar la simulación:", error);
          document.getElementById("simulacion-datos").innerHTML = "<p>Error al cargar datos.</p>";
        });
    }
  </script>
</body>
</html>
