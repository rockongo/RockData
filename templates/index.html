
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>RockData</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-light">
  <div class="container mt-5">
    <div class="text-center mb-4">
      <img src="{{ url_for('static', filename='logo_rockdata.png') }}" alt="RockData Logo" width="150">
      <h1 class="display-5 fw-bold text-dark">ROCKDATA</h1>
      <p class="text-muted fst-italic">No adivinamos. Calculamos.</p>
    </div>

    <!-- Resultados de predicciÃ³n principal -->
    {% if resultado %}
    <div class="card shadow p-4">
      <h4 class="mb-3 text-primary">ğŸ“Š Resultados de PredicciÃ³n</h4>
      <ul class="list-group">
        <li class="list-group-item">âš½ Goles en Primer Tiempo: <strong>{{ resultado['Goles 1T'] }}</strong></li>
        <li class="list-group-item">âš½ Goles en Segundo Tiempo: <strong>{{ resultado['Goles 2T'] }}</strong></li>
        <li class="list-group-item">ğŸ¯ Total Goles Esperados: <strong>{{ resultado['Goles Totales'] }}</strong></li>
        <li class="list-group-item">ğŸŸ¨ Tarjetas Amarillas: <strong>{{ resultado['Tarjetas Promedio'] }}</strong></li>
        <li class="list-group-item">ğŸŸ¥ Tarjetas Rojas: <strong>{{ resultado['Rojas'] }}</strong></li>
        <li class="list-group-item">ğŸ³ï¸ CÃ³rners Totales: <strong>{{ resultado['Corners'] }}</strong></li>
        <li class="list-group-item">ğŸ  Fortaleza Local (Ãºltimos 10): <strong>{{ resultado['Fortaleza Local'] }}%</strong></li>
        <li class="list-group-item">ğŸ›« Fortaleza Visita (Ãºltimos 10): <strong>{{ resultado['Fortaleza Visita'] }}%</strong></li>
        <li class="list-group-item bg-success-subtle">ğŸ§  <strong>PronÃ³stico Final: {{ resultado['PronÃ³stico'] }}</strong></li>
      </ul>
    </div>
    {% endif %}

    <!-- BotÃ³n Ãºnico para forma reciente -->
    <div class="text-end mt-3">
      <button class="btn btn-outline-primary btn-sm" onclick="mostrarSimulacion()">ğŸ“Š Ver forma reciente</button>
    </div>

    <!-- Contenedor que se llena dinÃ¡micamente -->
    <div id="simulacion-container" class="mt-4" style="display: none;">
      <h5>ğŸ“Š SimulaciÃ³n por Forma Reciente</h5>
      <div id="simulacion-datos" class="border rounded p-3 bg-light">
        <p>Cargando datos...</p>
      </div>
    </div>
  </div>

  <script>
    function mostrarSimulacion() {
      fetch('/static/simulacion_forma_reciente.json')
        .then(response => response.json())
        .then(data => {
          const statsLocal = data.forma_reciente.local;
          const statsVisita = data.forma_reciente.visita;
          const contenedor = document.getElementById("simulacion-datos");

          contenedor.innerHTML = `
            <h6><strong>LOCAL â€“ Ãšltimos 5 partidos</strong></h6>
            <ul>
              <li>Goles: ${statsLocal.goles}</li>
              <li>Goles 1T: ${statsLocal.goles_1t}</li>
              <li>Goles 2T: ${statsLocal.goles_2t}</li>
              <li>CÃ³rners: ${statsLocal.corners}</li>
              <li>Amarillas: ${statsLocal.amarillas}</li>
              <li>Rojas: ${statsLocal.rojas}</li>
            </ul>
            <h6><strong>VISITA â€“ Ãšltimos 5 partidos</strong></h6>
            <ul>
              <li>Goles: ${statsVisita.goles}</li>
              <li>Goles 1T: ${statsVisita.goles_1t}</li>
              <li>Goles 2T: ${statsVisita.goles_2t}</li>
              <li>CÃ³rners: ${statsVisita.corners}</li>
              <li>Amarillas: ${statsVisita.amarillas}</li>
              <li>Rojas: ${statsVisita.rojas}</li>
            </ul>
          `;

          document.getElementById("simulacion-container").style.display = "block";
        })
        .catch(error => {
          console.error("Error al cargar la simulaciÃ³n:", error);
          document.getElementById("simulacion-datos").innerHTML = "<p>Error al cargar datos.</p>";
        });
    }
  </script>
</body>
</html>
